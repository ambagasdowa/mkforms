<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Cover-Containt</title>
    <style type="text/css" media="screen">
      body {
        margin: 0;
        height: 100vh;
        overflow: hidden;
        font-family: sans-serif;
        font-weight: bold;
        font-size: 12px;
        text-transform: uppercase;
        background: #313640;
      }

      fieldset {
        background: rgba(23, 123, 122, 0.7);
        position: fixed;
        z-index: 1;
        top: 11px;
        left: 10px;
        padding: 8px 10px 8px 6px;
        border-radius: 4px;
        box-shadow: 0 10px 10px -8px rgba(0, 0, 0, 0.2);
      }

      label {
        position: relative;
        z-index: 1;
        cursor: pointer;
      }
      label:not(:last-child) {
        margin-right: 10px;
      }
      label input[type="radio"] {
        opacity: 0.01;
        width: 20px;
      }
      label input[type="radio"]:checked + span:before {
        box-shadow: inset 0 0 0 3px #fff;
      }
      label span {
        display: inline-block;
      }
      label span:before {
        content: "";
        position: absolute;
        z-index: 1;
        top: 1px;
        left: 5px;
        width: 10px;
        height: 10px;
        border: 1px solid #333;
        border-radius: 50%;
        background: #000;
        box-shadow: inset 0 0 0 6px #fff;
        transition: box-shadow 0.2s ease-out;
      }
    </style>
    <script defer src="./js/xeditor.js" charset="utf-8" type="module"></script>
  </head>
  <body>
    <!--
Copyright (c) 2020 by Fabio Ottaviani - Supah

Follow me on
Instagram: https://www.instagram.com/supahfunk/
Dribbble: https://dribbble.com/supahfunk
Twitter: https://twitter.com/supahfunk
Codepen: https://codepen.io/supah/

-->
    <div style="max-height: 95%; max-width: 100%; overflow: scroll">
      <canvas id="canvas"></canvas>
    </div>
    <fieldset>
      <label
        ><input type="radio" name="type" value="contain" checked /><span
          >contain</span
        ></label
      >
      <label
        ><input type="radio" name="type" value="cover" /><span
          >cover</span
        ></label
      >

      <input type="button" name="preview" value="prev" />
      <input type="button" name="next" value="next" />
    </fieldset>
  </body>
  <script type="text/javascript">
    /*--------------------
Setup
--------------------*/
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");
    const win = {
      w: window.innerWidth,
      h: window.innerHeight,
    };

    const img = new Image();

    /*--------------------
Cover Image
--------------------*/
    const coverImg = (img, type = "cover") => {
      const imgRatio = img.height / img.width;
      const winRatio = window.innerHeight / window.innerWidth;
      if (
        (imgRatio < winRatio && type === "contain") ||
        (imgRatio > winRatio && type === "cover")
      ) {
        const h = window.innerWidth * imgRatio;
        ctx.drawImage(
          img,
          0,
          (window.innerHeight - h) / 2,
          window.innerWidth,
          h
        );
      }
      if (
        (imgRatio > winRatio && type === "contain") ||
        (imgRatio < winRatio && type === "cover")
      ) {
        const w = (window.innerWidth * winRatio) / imgRatio;
        ctx.drawImage(img, (win.w - w) / 2, 0, w, window.innerHeight);
      }
    };

    /*--------------------
Render
--------------------*/
    const render = () => {
      ctx.clearRect(0, 0, win.w, win.h);
      const type = document.querySelector('input[name="type"]:checked').value;
      coverImg(img, type);
      requestAnimationFrame(render);
    };

    /*--------------------
Init
--------------------*/
    const init = () => {
      resize();
      render();
    };

    /*--------------------
Preload Image
--------------------*/
    //const imgSrc = "https://baizabal.xyz/assets/Panamericano/files//source/guia/uv/002/demo/pages/5.jpg";
    const imgSrc =
      "https://raw.githubusercontent.com/supahfunk/supah-codepen/master/autumn.jpg";
    img.onload = init;
    img.src = imgSrc;

    /*--------------------
Resize
--------------------*/
    const resize = () => {
      win.w = window.innerWidth;
      win.h = window.innerHeight;
      canvas.width = win.w;
      canvas.height = win.h;
      canvas.style.width = `${win.w}px`;
      canvas.style.height = `${win.h}px`;
    };
    window.addEventListener("resize", init);
  </script>
</html>
